function documentactions(t){let e=t.target;if(e.classList.contains("header__list__menu")&&(e.nextElementSibling.classList.toggle("active__menu"),e.classList.toggle("activebtn")),!e.classList.contains("header__list__menu")&&document.querySelector(".active__menu")&&(document.querySelector(".active__menu").classList.remove("active__menu"),document.querySelector(".activebtn").classList.remove("activebtn")),e.classList.contains("burger__btn")&&(e.classList.toggle("activebtn"),document.querySelector(".header__menu").classList.toggle("active__burger"),document.querySelector(".header__menu__links").classList.toggle("active__burger")),e.classList.contains("search__btn")&&document.querySelector(".header__search").classList.toggle("active__search"),e.classList.contains("footer__menu__btn")&&(e.classList.toggle("activefmenu"),e.nextElementSibling.classList.toggle("activefmenu")),e.classList.contains("products__morebtn")){e.remove(),document.querySelectorAll(".products__item").forEach(t=>t.style.display="block")}e.classList.contains("product__cartbtn")&&addToCart(e),e.classList.contains("header__actions__bin")&&cartlist.children.length&&cartContainer.classList.toggle("activecart"),e.closest(".cart__container")||!document.querySelector(".activecart")||e.classList.contains("cartitem__delete")||(document.querySelector(".activecart").classList.remove("activecart"),console.log(e))}document.addEventListener("click",documentactions);const mainSlider=document.querySelector(".main__slider__slider");mainSlider.addEventListener("mouseenter",(function(){swiper.autoplay.stop()})),mainSlider.addEventListener("mouseleave",(function(){swiper.autoplay.start()}));const swiper=new Swiper(".swiper",{observer:!0,effect:"coverflow",observeParents:!0,slidesPerView:1,spaceBetween:32,watchOverflow:!0,speed:800,loop:!0,loopAdditionalSlides:5,parallax:!0,touchRatio:2,autoplay:{},keyboard:{enabled:!0,onlyInViewport:!0},pagination:{el:".main__slider__dotts",clickable:!0},navigation:{nextEl:".main__slider__nextbtn",prevEl:".main__slider__prevbtn"}});let productsContainer=document.querySelector(".products");async function getProducts(){let t=await fetch("../json/products.json",{method:"GET"});if(t.ok){let e=(await t.json()).products.map(t=>{let e=document.createElement("article");e.classList.add("products__item"),e.id=t.id;let n=[];return t.labels&&(n=t.labels.map(t=>{let e=document.createElement("div");return e.classList.add("product__labels__item"),e.classList.add(""+t.type),e.innerText=t.value,e.outerHTML})),e.innerHTML=`<div class="product__head">\n        <div class="product__img"><img src=${t.image} alt=${t.title}></div>\n        <div class="product__labels">\n        ${n.join(" ")}\n        </div>\n    </div>\n    <div class="product__content">\n        <h3 class="product__title">${t.title}</h3>\n        <p class="product__text">${t.text}</p>\n        <div class="product__prices">\n            <p class="product__prices__actual">${t.price}</p>\n            <p class="product__prices__old">${t.priceOld}</p>\n        </div>\n    </div>\n    <div class="product__actions">\n        <button class="product__cartbtn">Add to cart</button>\n        <a href="#" class="product__sharebtn">Share</a>\n        <a href="#" class="product__likebtn">Like</a>\n    </div>`,e});productsContainer.append(...e)}else alert("Ошибка загрузки товаров")}getProducts();const cartBtn=document.querySelector(".header__actions__bin"),cartCounter=document.querySelector(".header__actions__bin span"),cartlist=document.querySelector(".cart__list"),cartContainer=document.querySelector(".cart");function addToCart(t){let e=t.closest(".products__item"),n=e.querySelector(".product__title"),c=e.querySelector(".product__img"),a=c.cloneNode(!0);a.classList.add("flyimage");let i=c.offsetWidth,s=c.offsetHeight,r=c.getBoundingClientRect().top,o=c.getBoundingClientRect().left;a.style.cssText=`\n    left: ${o}px;\n    top: ${r}px;\n    width: ${i}px;\n    height: ${s}px\n    `,document.body.append(a);const l=cartBtn.getBoundingClientRect().left,d=cartBtn.getBoundingClientRect().top;a.style.cssText=`\n    left: ${l}px;\n    top: ${d}px;\n    width: 0px;\n    height: 0px\n    `;let _=cartlist.querySelector(`[data-id="${e.id}"]`);if(_){_.querySelector(".cartitem__quantity__count").textContent++}else{let t=document.createElement("li");t.setAttribute("data-id",e.id),t.classList.add("cartitem"),t.innerHTML=`\n    <div class="cartitem__img">${a.innerHTML}</div>\n<div class="cartitem__content">\n<p class="cartitem__title">${n.textContent}</p>\n<p class="cartitem__quantity">Quantity:   <span class="cartitem__quantity__count">1</span></p>\n<button class="cartitem__delete">Delete</button>\n</div>\n    `,cartlist.append(t)}cartCounterEdit(),a.addEventListener("transitionend",(function(){cartCounter.style.display="block"}))}function cartCounterEdit(){let t=Array.from(cartlist.querySelectorAll(".cartitem__quantity__count")).map(t=>t.textContent);if(t.length){let e=Array.from(t).reduce((t,e)=>Number(t)+Number(e));cartCounter.textContent=e}else cartCounter.style.display="none",cartContainer.classList.contains("activecart")&&cartContainer.classList.remove("activecart")}cartContainer.addEventListener("click",(function(t){let e=t.target;if(e.classList.contains("cartitem__delete")){let t=e.closest(".cartitem"),n=t.querySelector(".cartitem__quantity__count");n.textContent--,0==n.textContent&&t.remove(),cartCounterEdit()}}));